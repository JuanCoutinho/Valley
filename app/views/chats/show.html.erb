<%= turbo_stream_from "chat_messages_channel_#{@chat.id}" %>

<div class="flex flex-col h-screen bg-gray-900 text-white p-6">
  <!-- Header -->
  <div class="mb-4">
    <h2 class="text-4xl font-bold">Chat</h2>
    <p class="text-gray-400">Com: <%= @destination.email %></p>
  </div>

  <hr class="border-gray-700 mb-4">

 

  <!-- Chat Messages List -->
  <div id="chat-messages-list" class="flex flex-col space-y-4 overflow-y-auto h-96 border border-gray-700 p-4 rounded-lg bg-gray-800">
    <% @chat_messages.each do |message| %>
      <div class="flex items-start space-x-3">
      
    
          <span class="font-semibold text-teal-300"><%= message.sender.email.split('@').first %>:</span>
          <p class="text-gray-300 mt-1"><%= message.message %></p>
 
      </div>
    <% end %>
  </div>
  <br>
  <!-- Message Form -->
  <%= form_with model: ChatMessage.new, local: true do |f| %>
    <div class="flex mb-4">
      <%= f.hidden_field :chat_id, value: @chat.id %>
      <%= f.text_field :message, placeholder: "Digite sua mensagem...", class: "flex-1 p-3 border border-gray-700 rounded-lg bg-gray-800 text-white" %>
      <%= f.submit 'âž®', class: "ml-2 px-4 py-2 bg-teal-500 hover:bg-teal-600 text-white font-semibold rounded-lg" %>
    </div>
  <% end %>
</div>
